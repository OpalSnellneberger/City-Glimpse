<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Glimpse</title>
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <!-- Link to Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

    <link rel="stylesheet" href="../public/css/style.css">
    
    <!-- Your custom styles go here -->
    <script src="https://kit.fontawesome.com/ec9a7f8813.js" crossorigin="anonymous">
    </script>
</head>
<body>
    <header>

        <nav>
            <h1>City Glimpse</h1>
            <a role="button" class="fa-solid fa-burger" aria-label="menu" aria-expanded="false">
              <!-- <span aria-hidden="true">Sign Up</span>
              <span aria-hidden="true">Login</span>
              <span aria-hidden="true"></span> -->
            </a>
        </nav>

    </header>
<div class="poloaroid">
    <div id="map"></div>
</div>
    <div id="comments">
        <h3>Comments</h3>
        <!-- Add your comment section content here -->
        <p>Restaurant Name:</p>
        <p>"It was good."</p>
        <!-- You can use JavaScript to dynamically load comments from a server -->
    </div>

    <!-- Link to Leaflet JavaScript -->

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    
    <!-- Your custom scripts go here, including Leaflet map initialization -->
<script>
     // Initialize the map
  var map = L.map('map').setView([39.9526, -75.165222], 13);
  // Add a tile layer (you can use your preferred tile layer)
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);
  // Add the geocoder control
  const geocoder = L.Control.geocoder({
    defaultMarkGeocode: false, // Prevent automatic marker placement on geocoded address
  }).on('markgeocode', function (e) {
    // Extract the geocoded information
    const { center, name, properties } = e.geocode;
    // Create a marker and add it to the map
    const marker = L.marker(center).addTo(map);
    // Bind a popup with the geocoded address information to the marker
    marker.bindPopup(`<h2><b>${name.split(",")[0]}</b></h2><br><div class="field">
  <label class="label">Type of Restaurant</label><br>
  <div class="control">
    <input class="input" type="text" placeholder="e.g Italian">
  </div>
</div>
<br>
<div class="field"><label class="label">Review</label><br>
    <textarea class="textarea" placeholder="e.g. It was good."></textarea><br><br>
 <button>Save</button>`).openPopup();
    // Execute your function with the geocoded information
    generateMapSearch(center, name, properties);
  }).addTo(map);
  // Function to run when an address is geocoded
  function generateMapSearch(center, name, properties) {
    // Your logic here
    console.log('Geocoded Address:', name);
    console.log('Coordinates:', center);
    console.log('Properties:', properties);
    // pull up the form
    // add the save button
  };

    // google street view tileLayer
    var googleStreets = L.tileLayer('http://{s}.google.com/vt?lyrs=m&x={x}&y={y}&z={z}', {
        maxZoom: 20,
        subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
    });
    googleStreets.addTo(map);
</script>


</body>
</html>
